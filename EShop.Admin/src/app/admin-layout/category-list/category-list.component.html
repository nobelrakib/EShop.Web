<app-breadcrumb [items]="['Category', 'Categories']"></app-breadcrumb>

<div class="row">
    <div class="col-md-12">
        <div class="card">

            <div class="card-header" style="padding-bottom: 0;">
                <div class="d-flex flex-column bd-highlight ">
                    <div class="bd-highlight">
                        <h3 style="display: inline;" class="card-title">Categories</h3>
                    </div>
                    <div class="p-2 bd-highlight"></div>
                    <div class="bd-highlight">
                        <div>
                            <label for="per-page">
                                Per Page:
                            </label>
                            <select id="per-page" (change)="onLimitChange($event.target.value)">
                                <option *ngFor="let option of pageLimitOptions" [value]="option.value"
                                    [selected]="option.value == currentPageLimit">
                                    {{ option.value }}
                                </option>
                            </select>
                            <button [hidden]="permissionNames.AddCategories | permissionCheck" type="button"
                                routerLink="/admin/category-add"
                                class="btn space-generator  btn btn-outline-primary mr-2">Add
                                Category</button>
                        </div>


                    </div>
                </div>

                <!-- <div>
                    <label for="per-page">
                        Per Page:
                    </label>
                    <select id="per-page" (change)="onLimitChange($event.target.value)">
                        <option *ngFor="let option of pageLimitOptions" [value]="option.value"
                            [selected]="option.value == currentPageLimit">
                            {{ option.value }}
                        </option>
                    </select>
                    <button [hidden]="permissionNames.AddCategories | permissionCheck" type="button"
                        routerLink="/admin/category-add" class="btn space-generator btn btn-outline-primary mr-2">Add
                        Category</button>
                </div> -->

                <!-- <button [hidden]="permissionNames.AddCategories | permissionCheck" type="button"
                    routerLink="/admin/category-add" class="btn space-generator btn btn-outline-primary mr-2">Add
                    Category</button> -->

            </div>
            <div class="card-body " style="padding-top: 0;">
                <div class="row">
                    <div class="col-md-12 position-relative">
                        <ngx-datatable class="bootstrap" [columnMode]="ColumnMode.force" [rows]="rows"
                            [treeFromRelation]="'parentId'" [treeToRelation]="'id'" (treeAction)="onTreeAction($event)"
                            rowHeight="auto" [headerHeight]="50">

                            <!-- <ngx-datatable-column name="Id" [width]="80"></ngx-datatable-column> -->



                            <ngx-datatable-column name="Name" [flexGrow]="3" [isTreeColumn]="true">
                                <ng-template let-value="value" ngx-datatable-cell-template>
                                    {{ value }}
                                </ng-template>
                            </ngx-datatable-column>
                            <ngx-datatable-column name="Actions" [width]="80">
                                <ng-template let-row="row" ngx-datatable-cell-template>
                                    <div style="display: inline-block;">
                                        <a style="display: inline;padding-left: 0" (click)="editCategory(row)"
                                            class="dropdown-item mr-2">
                                            <span><i class="fa fa-2x fa-pencil-square-o" aria-hidden="true"></i></span>
                                        </a>
                                        <a class="mr-2 cursor-pointer" (click)="removeCategory(row.id)">
                                            <span><i class="fa fa-2x fa-trash" aria-hidden="true"></i></span>
                                        </a>
                                    </div>
                                </ng-template>

                            </ngx-datatable-column>

                        </ngx-datatable>
                        <div class="d-flex justify-content-end">
                            <pagination [boundaryLinks]="true" [totalItems]="page.total" [itemsPerPage]="page.pageSize"
                                (pageChanged)="paginate($event)" previousText="&lsaquo;" nextText="&rsaquo;"
                                firstText="&laquo;" lastText="&raquo;">
                            </pagination>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- /.container-fluid -->